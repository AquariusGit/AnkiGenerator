# Anki 덱 생성기 - 사용자 설명서

Anki 덱 생성기에 오신 것을 환영합니다! 이 도구는 좋아하는 비디오와 자막에서 오디오, 스크린샷, 원본 텍스트가 포함된 이중 언어 Anki 학습 카드를 쉽고 효율적으로 만들 수 있도록 설계되었습니다.
코드는 상업적으로 사용 가능한 Apache 오픈 소스 라이선스를 기반으로 하며, 소스 코드 주소는 https://github.com/AquariusGit/AnkiGenerator 입니다.

## 목차
- [소프트웨어 소개](#소프트웨어-소개)
- [주요 기능](#주요-기능)
- [시스템 요구 사항](#시스템-요구-사항)
- [첫 사용](#첫-사용)
- [인터페이스 개요](#인터페이스-개요)
- [사용 단계](#사용-단계)
  - [1단계: 오디오/비디오 및 자막 다운로드](#1단계-오디오비디오-및-자막-다운로드)
  - [2단계: Anki 덱 생성](#2단계-anki-덱-생성)
  - [선택 사항: CSV 파일에서 생성](#선택-사항-csv-파일에서-생성)
- [구성 탭](#구성-탭)
- [자주 묻는 질문 (FAQ)](#자주-묻는-질문-faq)

---

## 소프트웨어 소개

이 도구는 YouTube와 같은 비디오 웹사이트에서 비디오/오디오 및 다국어 자막을 다운로드하고, Anki로 가져올 수 있는 `.apkg` 파일로 처리할 수 있는 그래픽 인터페이스 응용 프로그램입니다. 생성된 카드에는 원본 문장, 번역, 해당 오디오 클립, 비디오 스크린샷이 포함될 수 있으며, 중국어, 일본어, 한국어 언어에 대해 자동으로 병음/후리가나/로마자 표기를 추가하여 언어 학습 자료를 크게 풍부하게 할 수 있습니다.

## 주요 기능
- **비디오 다운로드**: YouTube와 같은 웹사이트에서 비디오 또는 순수 오디오를 다운로드하는 것을 지원합니다.
- **자막 다운로드**: 공식 자막 및 자동 생성 자막을 자동으로 가져오고 다운로드합니다.
- **이중 언어 카드**: 두 가지 언어 자막이 포함된 Anki 카드를 한 번의 클릭으로 생성합니다.
- **오디오 추출**: 비디오에서 각 자막에 해당하는 오디오 세그먼트를 자동으로 추출합니다.
- **비디오 스크린샷**: 각 카드에 대해 비디오 프레임을 자동으로 캡처합니다.
- **TTS 지원**: 비디오 또는 오디오가 없는 경우, gTTS 또는 Edge-TTS를 사용하여 자막에 대한 음성을 생성할 수 있습니다.
- **자동 발음 가이드**:
    - 일본어 한자에 자동으로 후리가나를 추가합니다.
    - 중국어 한자에 자동으로 병음을 추가합니다.
    - 한국어에 자동으로 로마자 표기를 추가합니다.
- **높은 사용자 정의 가능성**:
    - Anki 카드 템플릿 및 스타일을 사용자 정의합니다.
    - 자막 타임라인 조정, 자막 줄 병합.
    - 임시 파일 자동 정리와 같은 여러 후처리 옵션.
- **다국어 인터페이스**: 영어, 간체/번체 중국어, 일본어, 한국어, 베트남어 및 기타 인터페이스 언어를 지원합니다.

## 시스템 요구 사항
- **Python**: Python 3.x 환경이 필요합니다.
- **FFmpeg**: **FFmpeg**를 설치하고 시스템 환경 변수 (PATH)에 추가해야 합니다. FFmpeg는 비디오에서 오디오를 추출하고 스크린샷을 캡처하는 데 사용됩니다. 올바르게 설치되지 않으면 관련 기능을 사용할 수 없습니다.

## 첫 사용
이 소프트웨어를 처음 실행하면 "초기 설정" 창이 나타납니다.
1. **표시 언어 선택**: 소프트웨어 인터페이스에 표시할 언어를 선택합니다.
2. **기본 앞면/뒷면 언어 선택**: 가장 자주 사용하는 원본 언어(앞면)와 대상 언어(뒷면)를 설정합니다. 이렇게 하면 후속 작업에서 언어가 자동으로 선택되어 효율성이 향상됩니다.
설정 완료 후 "계속"을 클릭하여 메인 인터페이스로 들어갑니다.

## 인터페이스 개요
소프트웨어의 메인 인터페이스는 크게 세 부분으로 나뉩니다.
1. **왼쪽 - 기능 탭**:
    - **오디오/비디오 및 자막 다운로드**: 네트워크 URL에서 자료를 다운로드합니다.
    - **Anki 덱 생성**: 로컬 또는 다운로드한 자료를 사용하여 카드를 생성합니다.
    - **CSV에서 카드 생성**: `.csv` 파일에서 카드를 일괄 생성합니다.
    - **구성**: 소프트웨어의 기본 동작 및 Anki 템플릿을 설정합니다.
2. **오른쪽 - 로그 창**: 소프트웨어 작동 중 모든 정보, 경고 및 오류를 표시합니다.
3. **하단 - 진행률 표시줄**: 다운로드 또는 생성 진행률을 표시합니다.

## 사용 단계

### 1단계: 오디오/비디오 및 자막 다운로드
이 탭은 온라인 비디오에서 카드 생성에 필요한 자료를 얻는 데 사용됩니다. 그러나 비디오 또는 오디오에는 순수 중국어 또는 순수 일본어와 같이 단일 언어만 포함되어 있는 것이 가장 좋습니다. 동시에 여러 언어가 포함된 비디오 또는 오디오는 사용하지 마십시오. 예를 들어, 먼저 중국어를 읽고 그 다음 일본어를 읽는 비디오는 적합하지 않습니다. 이러한 기능을 제공해야 하는지 여부는 나중에 고려할 것입니다.

1. **비디오 URL**: YouTube 비디오 링크를 붙여넣습니다. 소프트웨어는 클립보드에서 유효한 링크를 자동으로 감지하여 채웁니다. 일반적으로 단일 비디오 파일이며, 재생 목록 또는 개인 비디오 페이지가 아닙니다(이는 잘못된 다운로드 또는 너무 많은 파일이 다운로드될 수 있습니다). 기본적으로 YouTube 비디오만 지원됩니다. 다른 웹사이트의 비디오를 사용하려면 URL 입력 필드 뒤의 확인란을 선택하여 URL 형식을 확인하지 않도록 표시하면 yt-dlp가 지원하는 모든 웹사이트에서 오디오/비디오 및 자막을 다운로드할 수 있습니다(결과는 직접 확인하십시오).
2. **쿼리 언어**: 이 버튼을 클릭하면 소프트웨어는 URL 분석을 시작하여 사용 가능한 모든 비디오/오디오 형식 및 자막 언어를 가져옵니다.
3. **다운로드 디렉토리**: 다운로드한 파일을 저장할 폴더를 선택합니다.
4. **오디오/비디오 형식**: 드롭다운 목록에서 형식을 선택합니다. 오디오와 비디오를 모두 포함하는 `mp4` 형식 또는 순수 오디오의 `m4a` 형식을 선택하는 것이 좋습니다.
5. **앞면/뒷면 자막 언어**: 카드 앞면과 뒷면에 사용할 자막 언어를 각각 선택합니다. 소프트웨어는 "구성"에 따라 기본 언어를 자동으로 선택하려고 시도합니다.
6. **자막만 다운로드**: 로컬에 비디오 파일이 이미 있거나 스크린샷 및 원본 오디오를 생성하고 싶지 않은 경우, 이 옵션을 선택하여 자막 파일만 다운로드할 수 있습니다.
7. **다운로드 시작**: 클릭하여 다운로드를 시작합니다. 완료 후 소프트웨어는 다운로드한 파일 경로를 "Anki 덱 생성" 탭에 자동으로 채울지 여부를 묻습니다. "예"를 선택하는 것이 좋습니다.

### 2단계: Anki 덱 생성
이 탭은 자료를 Anki 카드로 결합하는 핵심 기능이 있는 곳입니다.

1. **파일 경로 설정**:
    - **미디어 파일 (선택 사항)**: 비디오 또는 오디오 파일을 선택합니다. 비디오에서 오디오 및 스크린샷을 추출하려면 이 항목이 필수입니다.
    - **앞면/뒷면 자막 파일**: 두 가지 언어의 자막 파일(`.srt` 또는 `.vtt` 형식)을 선택합니다.
    - **출력 디렉토리**: 생성된 Anki 덱(`.apkg`) 및 임시 파일의 저장 위치를 선택합니다(디렉토리가 존재하지 않으면 자동으로 생성됩니다).
    - **Anki 덱 이름**: Anki 덱의 이름을 지정합니다. 기본적으로 앞면 자막 파일 이름과 동일합니다.

2. **주요 옵션**:
    - **스크린샷 옵션**:
        - `스크린샷 추가`: 선택하면 각 카드에 대한 스크린샷이 생성됩니다.
        - `스크린샷 시간 지점`: 자막의 시작, 중간 또는 끝에서 스크린샷을 찍을지 선택합니다.
        - `품질`: 스크린샷 품질, 1-31 사이, 숫자가 작을수록 품질이 높습니다(파일 크기도 커집니다).
    - **TTS 엔진**: 미디어 파일이 없거나 오디오 추출에 실패했을 때 음성을 생성하는 데 사용할 엔진. `gTTS`는 Google 서비스에 연결해야 합니다. 사용 가능한지 직접 확인하십시오. `gTTS`와 `edge-tts`는 모두 좋은 선택입니다. `MP3 생성 안 함`은 이 기능을 비활성화합니다. `gTTS`는 Google 서비스에 연결해야 합니다. 사용 가능한지 직접 확인하십시오.
    - **느린 음성**: 선택하면 gTTS는 더 느린 속도로 음성을 생성합니다(edge-tts는 이를 지원하지 않습니다).
    - **자막 정리**: `...비대화 내용 제거`를 선택하면 자막에서 `[음악]`, `(박수)`와 같은 내용이 자동으로 삭제됩니다.
    - **발음 가이드 옵션**: 선택하면 앞면 또는 뒷면의 중국어/일본어/한국어에 발음 가이드가 추가됩니다.
    - **후처리**:
        - `.mp3/.jpg/.csv 파일 정리`: 선택하면 Anki 덱이 성공적으로 생성된 후 프로세스 중에 생성된 임시 오디오, 스크린샷 및 데이터 파일이 자동으로 삭제됩니다.
    - **타임라인 오프셋(ms)**: 오디오와 자막 사이에 고정된 지연이 있는 경우, 여기에 밀리초를 입력하여 수정합니다(양수는 오디오를 앞당기고, 음수는 오디오를 지연시킵니다).
    - **자막 시간 범위**: 비디오의 특정 부분에 대해서만 카드를 만들려면 여기에 시작 및 종료 시간을 입력합니다(형식 `HH:MM:SS`).
    - **자막 병합**:
        - `시간이 가까운 자막 줄 병합`: 선택하면 시간 간격이 매우 짧은 짧은 자막 줄이 하나의 문장으로 병합되어 대화가 많은 비디오 처리에 적합합니다. 이 기능은 아직 미성숙하므로 주의해서 사용하십시오. 간격이 불규칙한 팟캐스트와 같은 미디어에만 시도할 수 있습니다.
        - `최대 간격(ms)`: 자막을 병합할 수 있는 근접성을 정의합니다.
    - **파일 처리**:
        - `기존 Anki 덱 덮어쓰기`: 선택하면 출력 디렉토리에 동일한 이름의 파일이 이미 존재하는 경우 직접 덮어씁니다.

3. **생성 및 미리보기**:
    - **첫 5개 카드 미리보기**: 전체 덱을 생성하지 않고 HTML 파일을 빠르게 생성하여 브라우저에서 첫 5개 카드의 효과를 미리 봅니다. 미리보기에는 오디오 및 미리보기 이미지가 포함되지 않습니다.
    - **Anki 덱 생성**: 클릭하여 최종 생성 프로세스를 시작합니다.

### 선택 사항: CSV 파일에서 생성
이미 정리된 이중 언어 비교 텍스트가 있는 경우, 이 기능을 사용하여 빠르게 카드를 만들 수 있습니다.

1. **CSV 파일 준비**: `.csv` 파일을 만들고, **첫 번째 열**을 카드의 앞면 텍스트로, **두 번째 열**을 카드의 뒷면 텍스트로 합니다. UTF-8로 인코딩되어야 합니다. TTS로 음성을 생성해야 하는 경우, 발음 가이드 등의 내용을 추가하지 마십시오.
2. **CSV 파일**: 소프트웨어에서 준비한 CSV 파일을 선택합니다.
3. **설정 옵션**: "Anki 덱 생성" 탭과 유사하게 출력 디렉토리, 덱 이름, TTS 엔진 및 발음 가이드 옵션을 설정할 수 있습니다. 선택한 앞면 및 뒷면 언어가 CSV 파일과 일치하는지 확인하십시오. 그렇지 않으면 발음이 올바르지 않을 수 있습니다.
4. **Anki 덱 생성**: 버튼을 클릭하여 생성을 시작합니다. 이 모드에서는 오디오 추출 및 스크린샷 기능이 없으며, 오디오는 전적으로 TTS에 의해 생성됩니다.

## 구성 탭
여기에서 소프트웨어의 기본 동작 및 카드 모양을 사용자 정의할 수 있습니다.

- **기본 앞면/뒷면 자막 언어**: 가장 자주 사용하는 언어를 설정하면 소프트웨어는 "다운로드" 및 "자동 채우기" 시 해당 언어를 우선적으로 사용합니다.
- **Anki 템플릿 및 스타일**:
    - **앞면/뒷면 템플릿**: Anki의 템플릿 구문(예: `{{Question}}`, `{{Audio_Answer}}`)을 사용하여 카드의 앞면과 뒷면의 레이아웃을 사용자 정의합니다.
    - **스타일시트**: CSS 코드를 사용하여 카드의 글꼴, 색상, 배경 및 기타 모양을 사용자 정의합니다.
- **HTML 템플릿 미리보기**: "미리보기" 버튼을 클릭할 때 생성되는 HTML 파일의 기본 구조를 사용자 정의합니다. 일반적으로 수정하지 않는 것이 좋습니다.
- **저장 및 복원**:
    - `구성 저장`: 위 모든 설정에 대한 변경 사항을 저장합니다.
    - `구성 복원`: 변경 사항을 취소하고 마지막으로 저장된 상태로 복원합니다.

## 자주 묻는 질문 (FAQ)
1. **Q: 소프트웨어에 "FFmpeg not found"(FFmpeg를 찾을 수 없음) 메시지가 표시되면 어떻게 해야 합니까?**
    A: FFmpeg 공식 웹사이트에서 다운로드하여 압축을 푼 다음, `bin` 디렉토리의 전체 경로를 운영 체제의 `PATH` 환경 변수에 추가하고 소프트웨어를 다시 시작해야 합니다.

2. **Q: 붙여넣은 YouTube 링크가 유효하지 않다고 표시되는 이유는 무엇입니까?**
    A: 이 도구는 현재 단일 비디오 URL만 지원하며, 재생 목록(Playlist) URL은 지원하지 않습니다. 링크에 `list=` 매개변수가 포함되어 있지 않은지 확인하십시오. 다른 웹사이트의 비디오를 사용하거나 소프트웨어를 yt-dlp UI로 사용하려는 경우, URL 주소 뒤의 옵션을 선택하여 URL 확인을 강제로 비활성화하십시오.

3. **Q: 발음 가이드 기능은 어떤 언어를 지원합니까?**
    A: 현재 일본어 후리가나, 중국어 병음, 한국어 로마자 표기 추가를 지원합니다. 소프트웨어는 선택한 자막 파일 이름 또는 구성의 기본 언어를 기반으로 자동으로 판단합니다.

4. **Q: gTTS와 edge-tts의 차이점은 무엇입니까?**
    A: 둘 다 텍스트 음성 변환 엔진입니다. gTTS(Google Text-to-Speech)는 속도가 약간 느릴 수 있지만 느린 재생을 지원합니다. edge-tts(Microsoft Edge Text-to-Speech)는 일반적으로 더 자연스럽고 고품질의 음성을 제공하지만 느린 재생을 지원하지 않습니다. 필요에 따라 선택할 수 있습니다. 한 엔진이 실패하면 소프트웨어는 자동으로 다른 엔진을 시도합니다.

5. **Q: YouTube의 자동 자막을 사용하여 Anki 덱을 생성하는 데 문제가 있습니까?**
    A: 확실히 말하기 어렵습니다. 자동 자막은 문장 분할에 많은 문제가 있을 수 있으며, 이로 인해 생성된 음성 및 추출된 음성 모두에 문제가 발생할 수 있으므로 자동 자막 사용은 크게 권장되지 않습니다. 가능한 한 작성자가 제공한 자막을 사용하십시오.